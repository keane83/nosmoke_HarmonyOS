import { router } from '@kit.ArkUI';

interface Achievement {
  id: string;
  name: string;
  description: string;
  unlocked: boolean;
  icon: string;
}

@Entry
@Component
struct Achievements {
  @State achievements: Achievement[] = [
    {
      id: '1',
      name: 'åšæŒä¸€å°æ—¶',
      description: 'ä¸å¸çƒŸæ»¡ 1 å°æ—¶',
      unlocked: false,
      icon: 'â°'
    },
    {
      id: '2',
      name: 'åšæŒä¸€å¤©',
      description: 'ä¸å¸çƒŸæ»¡ 1 å¤©',
      unlocked: false,
      icon: 'ðŸ“…'
    },
    {
      id: '3',
      name: 'è™šæ‹Ÿå¸çƒŸè€…',
      description: 'å®Œæˆ 10 æ¬¡è™šæ‹Ÿå¸çƒŸ',
      unlocked: false,
      icon: 'ðŸ’¨'
    },
    {
      id: '4',
      name: 'æŽ§åˆ¶å¤§å¸ˆ',
      description: 'æˆåŠŸæŽ§åˆ¶çƒŸç˜¾ 3 æ¬¡',
      unlocked: false,
      icon: 'ðŸŽ¯'
    },
    {
      id: '5',
      name: 'çœé’±è¾¾äºº',
      description: 'ç´¯è®¡èŠ‚çœ 500 å…ƒ',
      unlocked: false,
      icon: 'ðŸ’°'
    },
    {
      id: '6',
      name: 'ä¸€å‘¨åšæŒ',
      description: 'è¿žç»­ 7 å¤©æ²¡æŠ½çœŸå®žçƒŸ',
      unlocked: false,
      icon: 'ðŸ†'
    },
    {
      id: '7',
      name: 'è®°å½•ä¹ æƒ¯',
      description: 'è¿žç»­ 3 å¤©è®°å½•è¯±å› ',
      unlocked: false,
      icon: 'ðŸ“'
    }
  ];

  aboutToAppear() {
    this.loadAchievements();
    this.checkAchievements();
  }

  loadAchievements() {
    // TODO: ä»Žæœ¬åœ°å­˜å‚¨åŠ è½½æˆå°±çŠ¶æ€
  }

  checkAchievements() {
    // TODO: æ£€æŸ¥å¹¶æ›´æ–°æˆå°±çŠ¶æ€
    // è¿™é‡Œå…ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®
    this.achievements[0].unlocked = true;
    this.achievements[2].unlocked = true;
  }

  build() {
    Column() {
      Text('æˆå°±ç³»ç»Ÿ')
        .fontSize(24)
        .fontWeight(FontWeight.Bold)
        .fontColor('#333')
        .margin({ top: 20, bottom: 30 })

      // æˆå°±ç»Ÿè®¡
      Row() {
        Text(`å·²è§£é”: ${this.achievements.filter(a => a.unlocked).length} / ${this.achievements.length}`)
          .fontSize(18)
          .fontColor('#333')
      }
      .width('90%')
      .margin({ bottom: 20 })

      // æˆå°±åˆ—è¡¨
      Grid() {
        ForEach(this.achievements, (achievement: Achievement) => {
          GridItem() {
            Column() {
              Text(achievement.icon)
                .fontSize(40)
                .opacity(achievement.unlocked ? 1 : 0.3)
              
              Text(achievement.name)
                .fontSize(16)
                .fontWeight(FontWeight.Medium)
                .fontColor(achievement.unlocked ? '#333' : '#999')
                .margin({ top: 10 })
              
              Text(achievement.description)
                .fontSize(12)
                .fontColor('#666')
                .margin({ top: 5 })
                .maxLines(2)
                .textOverflow({ overflow: TextOverflow.Ellipsis })
            }
            .width('100%')
            .height('100%')
            .padding(15)
            .justifyContent(FlexAlign.Center)
            .backgroundColor(achievement.unlocked ? '#FFF9C4' : '#FFFFFF')
            .borderRadius(10)
            .border({
              width: achievement.unlocked ? 2 : 1,
              color: achievement.unlocked ? '#FFD700' : '#E0E0E0',
              radius: 10
            })
            .shadow({ radius: 2, color: '#E0E0E0', offsetX: 0, offsetY: 1 })
          }
        })
      }
      .columnsTemplate('1fr 1fr')
      .rowsTemplate('1fr 1fr 1fr 1fr')
      .columnsGap(15)
      .rowsGap(15)
      .width('90%')
      .layoutWeight(1)
    }
    .width('100%')
    .height('100%')
    .backgroundColor('#F5F5F5')
    .padding(20)
  }
}

